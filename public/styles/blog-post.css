:root{
  --bg:#F9F9F6;
  --main:#4C6B5C;
  --accent:#A3C9A8;
  --hi:#D6EADF;
  --text:#2B2B2B;
  --muted:#6b7280;
  --white:#fff;
  --radius:14px;
  --shadow:0 8px 24px rgba(0,0,0,.08);
  --code-bg:#f1f5f9;
  --hr:#e5e7eb;
  --table-border:#e5e7eb;
  --table-head:#f7faf9;
  --selection: rgba(163,201,168,.35);
}

html,body{background:var(--bg);color:var(--text)}
*{box-sizing:border-box}
::selection{background:var(--selection)}
main{padding-top:60px}

/* コンテナ */
.post{
  max-width:860px;
  margin:clamp(.5rem, 2.5vw, 2rem) auto 3rem;
  padding:0 1rem;
}

/* ヒーロー */
.post-title{
  font-size:clamp(1.5rem, 5.5vw, 2.2rem);
  line-height:1.25; margin:.2rem 0 .6rem;
}
.post-meta{
  display:flex; flex-wrap:wrap; gap:.6rem .8rem; align-items:center;
  color:var(--muted); font-size:.92rem; margin-bottom:1rem;
}
.badge{
  background:var(--hi); color:var(--main);
  padding:.2rem .6rem; border-radius:999px; font-weight:600
}
.dot{opacity:.5}

.cover{
  border-radius:16px; overflow:hidden; margin: .5rem 0 1rem;
  box-shadow:var(--shadow);
}
.cover img{display:block; width:100%; height:clamp(180px, 35vw, 380px); object-fit:cover}

/* アクション */
.tool-row{display:flex; gap:.6rem; margin:.2rem 0 1.2rem}
.btn{
  border:none; cursor:pointer; padding:.6rem .9rem;
  border-radius:10px; font-weight:700; font-size:.95rem;
  background:var(--main); color:var(--white);
  transition:transform .15s ease, box-shadow .15s ease, background .2s ease;
}
.btn:hover{background:#3f5b4f}
.btn:active{transform:translateY(1px)}
.btn.link{background:var(--accent); color:#124;}
.btn.link:hover{background:#90bf98}

/* 目次 */
.toc{
  background:var(--white); border-radius:12px; padding:.8rem 1rem;
  box-shadow:var(--shadow); margin:0 0 1.2rem;
}
.toc summary{cursor:pointer; font-weight:700; color:#334;}
.toc ol{margin:.5rem 0 0 1rem; padding:0}
.toc a{color:var(--main); text-decoration:none}
.toc a:hover{text-decoration:underline}

/* 本文タイポグラフィ（強化版） */
.post-body{
  background:var(--white); border-radius:16px; box-shadow:var(--shadow);
  padding:clamp(1rem, 3.5vw, 2rem); line-height:1.9; font-size:1.04rem;
}
.post-body p{margin:.9rem 0}
.post-body a{
  color:var(--main);
  text-decoration:underline;
  text-underline-offset:2px;
  text-decoration-thickness:2px;
}
.post-body strong{font-weight:750}
.post-body em{font-style:italic}
.post-body ul, .post-body ol{margin:.5rem 0 1rem 1.2rem}
.post-body li{margin:.2rem 0}
.post-body hr{
  border:none; height:1px; background:linear-gradient(90deg, transparent, var(--hr), transparent);
  margin:1.6rem 0;
}

/* 見出しにアクセント（h2:サイドライン＋下線、h3:下線のみ） */
.post-body h2{
  position:relative;
  font-size:clamp(1.25rem, 2.8vw, 1.6rem);
  margin:1.8rem 0 .8rem; padding-left:.85rem; padding-bottom:.25rem;
  scroll-margin-top:80px; /* アンカー遷移で隠れないように */
}
.post-body h2::before{
  content:""; position:absolute; left:0; top:.15rem; bottom:.15rem;
  width:4px; border-radius:4px; background: linear-gradient(180deg, var(--accent), var(--main));
  opacity:.9;
}
.post-body h2::after{
  content:""; display:block; height:2px; margin-top:.45rem;
  background:linear-gradient(90deg, var(--hi), transparent);
  border-radius:2px;
}

.post-body h3{
  position:relative;
  font-size:clamp(1.1rem, 2.4vw, 1.3rem);
  margin:1.2rem 0 .5rem; padding-bottom:.25rem;
}
.post-body h3::after{
  content:""; display:block; height:2px; width:120px;
  background: linear-gradient(90deg, var(--accent), transparent);
  border-radius:2px; margin-top:.35rem; opacity:.85;
}

/* 見出しのリンクアイコン（hoverで表示） */
.post-body h2[id], .post-body h3[id]{scroll-margin-top:80px}
.post-body h2[id] a.anchor, .post-body h3[id] a.anchor{
  opacity:0; margin-left:.4rem; color:var(--muted); text-decoration:none; font-size:.95em;
  transition:opacity .15s ease;
}
.post-body h2:hover a.anchor, .post-body h3:hover a.anchor{opacity:1}

/* 引用・コード */
.post-body blockquote{
  border-left:4px solid var(--accent); background:#f3faf5;
  padding:.7rem .9rem; border-radius:10px; color:#234; margin:1rem 0;
}
.post-body pre{
  background:#0f172a; color:#e2e8f0; padding:1rem; border-radius:12px;
  overflow:auto; font-size:.93rem;
}
.post-body code{
  background:var(--code-bg); color:#0f172a; padding:.12rem .4rem; border-radius:6px
}
.post-body pre code{background:transparent; padding:0}

/* テーブル（視認性アップ・区切り明瞭・スクロール対応） */
.post-body .table-wrapper{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 1rem 0;
}
.post-body table{
  width: max-content;
  border-collapse: separate;
  border-spacing: 0;
  table-layout: auto;
  border: 1px solid var(--table-border);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 1px 0 var(--table-border) inset, 0 -1px 0 var(--table-border) inset;
}
.post-body thead th{
  background: var(--table-head);
  color: #1f2937;
  font-weight: 700;
  text-align: left;
  padding: .75rem .9rem;
  border-bottom: 1px solid var(--table-border);
  white-space: nowrap;
}
.post-body tbody td{
  padding: .7rem .9rem;
  border-bottom: 1px solid var(--table-border);
  word-break: break-word;
  overflow-wrap: anywhere;
}
.post-body tbody tr:nth-child(even){ background:#fafcfb }
.post-body tbody tr:hover{ background:#f5fbf7 }

/* 画像のキャプション＆軽いズーム */
.post-body figure{margin:1rem 0}
.post-body figure img{max-width:100%; border-radius:12px; box-shadow:0 2px 10px rgba(0,0,0,.06); transition:transform .2s ease}
.post-body figure:hover img{transform:scale(1.01)}
.post-body figcaption{font-size:.85rem; color:var(--muted); text-align:center; margin-top:.4rem}

/* 情報ボックス（任意で使える） */
.post-body .callout{
  border-radius:12px; padding:.85rem 1rem; margin:1rem 0;
  background:#f8fffb; border:1px solid #d8f3e6;
}
.post-body .callout.info{background:#f3f8ff; border-color:#cfe2ff}
.post-body .callout.warn{background:#fff8f3; border-color:#ffe0c2}

/* キーボード・脚注など */
.post-body kbd{
  background:#111827; color:#e5e7eb; padding:.15rem .4rem; border-radius:6px;
  font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  font-size:.9em;
}
.post-body sup{line-height:0}
.post-body sup a{color:var(--muted); text-decoration:none}
.post-body sup a:hover{text-decoration:underline}

/* タグ */
.tags{display:flex; flex-wrap:wrap; gap:.5rem; margin:1.2rem 0}
.tag{
  display:inline-block; padding:.35rem .7rem; border-radius:999px;
  background:var(--hi); color:var(--main); text-decoration:none; font-weight:600;
}
.tag:hover{filter:brightness(.95)}

/* 著者 */
.author{
  display:flex; gap:.9rem; align-items:flex-start;
  background:var(--white); border-radius:16px; box-shadow:var(--shadow);
  padding:1rem; margin:1.4rem 0 1.6rem;
}
.author .avatar{width:56px; height:56px; border-radius:50%; object-fit:cover}

/* 前後ナビ */
.post-nav{
  display:flex; justify-content:space-between; align-items:center;
  gap:1rem; margin:1.2rem 0 1.6rem;
}
.post-nav a{color:var(--main); text-decoration:none; font-weight:700}
.post-nav a:hover{text-decoration:underline}

/* 関連記事 */
.related{margin:1.8rem 0 1.2rem}
.related h2{font-size:1.15rem; margin:0 0 .8rem}
.related-list{
  display:flex; gap:.9rem; overflow-x:auto; padding-bottom:.4rem;
  scroll-snap-type:x mandatory;
}
.related-card{
  flex:0 0 auto; width:220px; background:var(--white);
  border-radius:12px; overflow:hidden; box-shadow:var(--shadow);
  text-decoration:none; color:var(--text); scroll-snap-align:start;
  transition:transform .15s ease, box-shadow .15s ease;
}
.related-card:hover{transform:translateY(-2px); box-shadow:0 12px 32px rgba(0,0,0,.12)}
.related-card img{width:100%; height:120px; object-fit:cover; display:block}
.rc-title{padding:.7rem .8rem; font-weight:700; font-size:.95rem}

/* 戻る */
.back{margin:1.6rem 0 0}
.back a{color:var(--main); text-decoration:none}
.back a:hover{text-decoration:underline}

/* レスポンシブ微調整 */
@media(min-width:960px){
  .post-body{font-size:1.06rem}
}

/* 補助：長いテーブルの横スクロール用ラッパーを自動にしたい場合（任意） */
.post-body table{display:block; overflow-x:auto; white-space:nowrap}