:root{
  --bg:#F9F9F6; --text:#2B2B2B;
  --main:#4C6B5C; --accent:#A3C9A8; --hi:#D6EADF;
  --muted:#6b7280; --white:#fff;
  --radius:16px; --shadow:0 10px 30px rgba(0,0,0,.08);
}

html,body{background:var(--bg); color:var(--text)}
*{box-sizing:border-box}

.listing{max-width:1100px; margin:80px auto 40px; padding:0 16px}
.listing__form{display:block}

.bar{
  position:sticky; top:60px; z-index:50;
  display:flex; justify-content:space-between; align-items:center;
  background:rgba(249,249,246,.7); backdrop-filter: blur(8px);
  border:1px solid #e5e7eb; border-radius:12px; padding:.6rem .8rem; margin-bottom:1rem;
}
.bar h1{margin:0; font-size:1.1rem}
.bar .hint{color:var(--muted); font-size:.9rem}
.bar .btn{min-height:40px}
.bar .btn + .btn{margin-left:.4rem}
/* @media(max-width:720px){
  .bar{flex-direction: column;}
  .bar__right{width: 100%;display: flex;justify-content: space-around;}
  .bar .btn{width: 100%;}
} */

.grid{
  display:grid; gap:1rem;
  grid-template-columns:2fr 1fr;
}
@media(max-width:960px){
  .grid{grid-template-columns:1fr}
}

.card{
  background:var(--white); border-radius:var(--radius); box-shadow:var(--shadow);
  padding:1rem 1rem 1.2rem;
  width: 100%;
}
.card__title{margin:.1rem 0 .8rem; font-size:1.05rem}

.field{margin:.8rem 0}
.field--row{display:grid; gap:.8rem; grid-template-columns:1fr 1fr 1fr}
@media(max-width:720px){ .field--row{grid-template-columns:1fr} }

label{display:block; font-weight:700; margin-bottom:.3rem}
input[type="text"], input[type="number"], select, textarea{
  width:100%; min-height:44px; padding:.6rem .7rem; border-radius:12px;
  border:1px solid #e5e7eb; background:var(--white); outline:none;
  transition:border-color .15s ease, box-shadow .15s ease;
}
textarea{min-height:160px; line-height:1.7}
input:focus, select:focus, textarea:focus{
  border-color:var(--accent); box-shadow:0 0 0 3px rgba(163,201,168,.25)
}
.help{color:var(--muted); font-size:.9rem; margin:.3rem 0 0}
/* 初期状態: 非表示（高さゼロ、透明） */
.error {
  margin: 0;
  font-size: 0.85rem;
  color: var(--color-error);
  line-height: 1.2;
  height: 0;
  opacity: 0;
  overflow: hidden;
  transition: height 0.2s ease, opacity 0.2s ease;
}

/* 表示状態 */
.error.is-visible {
  margin-top: 0.25rem;
  height: auto;   /* テキストに応じて展開 */
  opacity: 1;
}

.check{display:inline-flex; align-items:center; gap:.4rem; margin-right:.8rem}

.btn{
  background:var(--main); color:#fff; border:none; border-radius:12px;
  padding:.6rem 1rem; cursor:pointer; font-weight:800;
  transition:transform .1s ease, filter .2s ease;
}
.btn:hover{filter:brightness(.95)}
.btn:active{transform:translateY(1px)}
.btn--ghost{background:#fff; color:var(--main); border:1px solid #e5e7eb}

/* 仕様・規格（キーバリュー） */
.kv__row{
  display:grid; grid-template-columns:1fr 1fr auto; gap:.5rem; margin:.4rem 0;
}
/* バリエーション行（4入力＋削除） */
.variant-row{
  display:grid; grid-template-columns:2fr 1fr 1fr 1fr auto; gap:.5rem; margin:.4rem 0;
  align-items: center;
}
.variant-row input[type="text"],
.variant-row input[type="number"]{
  min-width: 0;
}
@media(max-width:640px){
  .variant-row{
    grid-template-columns:1fr 1fr;
  }
}

.icon-btn{
  background:transparent; border:1px solid #e5e7eb; border-radius:10px; padding:.35rem .6rem; cursor:pointer; font-size: 14px;
}
.icon-btn:hover{filter:brightness(.95)}

/* Uploader */
.uploader__list.sortable{
  display:grid;
  gap:.6rem;
  grid-template-columns:repeat(auto-fill, minmax(140px, 1fr));
  margin:.6rem 0 .8rem;
  padding:0;
  list-style:none;
}
.uploader__item{
  position:relative;
  border:1px solid #e5e7eb;
  border-radius:12px;
  overflow:hidden;
  background:#fff;
  box-shadow: 0 8px 24px rgba(0,0,0,.06);
  padding-bottom:.4rem;
}
.uploader__item img{
  display:block;
  width:100%;
  aspect-ratio:4/3;       /* ← これで比率固定 */
  object-fit:cover;       /* ← センタートリミング */
  background:#f0f3f2;
  user-drag:none;
  -webkit-user-drag:none;
  pointer-events:none;
}
.uploader__item .alt{
  width:calc(100% - 20px);
  margin:.4rem 10px 0;
  border:1px solid #e5e7eb;
  border-radius:8px;
  padding:.4rem .6rem;
}
.uploader__item .img-del{
  position:absolute; top:6px; right:6px;
  border:1px solid #ef4444; background:#fff; color:#b91c1c;
  border-radius:8px; padding:.2rem .45rem;
}
.uploader__item .handle{
  position:absolute; left:6px; top:6px;
  cursor:grab; background:#fff; border:1px solid #e5e7eb;
  border-radius:8px; padding:.2rem .45rem;
  touch-action:none; user-select:none;   /* ← モバイルD&Dの要 */
}

/* D&D用：ドラッグ中の見た目／プレースホルダ */
.uploader__list.sortable{ position:relative; }
.uploader__item.dragging{
  opacity:.95; box-shadow:0 12px 28px rgba(0,0,0,.18); cursor:grabbing;
}
.uploader__placeholder{
  border:2px dashed #cbd5e1; border-radius:12px; background:#f8fafc;
}
.uploader__drop{
  width:100%; min-height:120px; border:2px dashed #d1d5db; border-radius:14px;
  background:linear-gradient(180deg, #ffffff, #fbfbfb);
  cursor:pointer; font-weight:800;
}
.uploader__drop:hover{filter:brightness(.98)}
.uploader__list{
  list-style:none; display:grid; gap:.6rem; grid-template-columns:repeat(3,1fr); margin:.7rem 0 0; padding:0;
}
@media(min-width:960px){ .uploader__list{grid-template-columns:repeat(4,1fr)} }
.preview{
  position:relative; border-radius:12px; overflow:hidden; background:#f3f4f6; border:1px solid #e5e7eb;
}
.preview img{display:block; width:100%; height:140px; object-fit:cover}
.preview__tools{
  position:absolute; inset:auto .3rem .3rem .3rem; display:flex; gap:.3rem; justify-content:space-between;
}
.preview__btn{
  background:rgba(0,0,0,.65); color:#fff; border:none; border-radius:10px; padding:.25rem .45rem; cursor:pointer; font-size:.9rem
}
.preview__btn:hover{filter:brightness(1.1)}
.preview.dragover{outline:3px dashed var(--accent); outline-offset:-6px}

/* 右サイド */
.side{display:flex; flex-direction:column; gap:1rem}
.actions{display:flex; gap:.4rem; justify-content:flex-end}