<%-
  include('../../layouts/list', {
    title,
    pageTitle: '取引一覧',
    request,
    q,
    searchAction,
    filtersHTML,
    body: `
      <table class="lv-table">
        <thead>
          <tr>
            <th>注文者</th>
            <th>注文状況</th>
            <th>支払い</th>
            <th>出荷/受取状況</th>
            <th>合計</th>
            <th>注文日時</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          ${items.map(it => `
            <tr>
              <td data-label="注文者">${it.partner_name}</td>
              <td data-label="注文状況" class="pc__status"><span class="lv-badge">${it.status_ja}</span></td>
              <td data-label="支払い" class="pc__status"><span class="lv-badge ${it.payment_status==='paid'?'ok': it.payment_status==='unpaid'?'warn':''}">${it.payment_status_ja}</span></td>
              <td data-label="出荷" class="pc__status"><span class="lv-badge ${it.shipment_status==='delivered'?'ok': it.shipment_status==='returned'?'ng':''}">
                ${
                  it.ship_method === 'pickup'
                    ? (it.shipment_status === 'delivered' ? '受取完了' : '未受取')
                    : it.shipment_status_ja
                }
              </span></td>

              <td class="sub-table">
                <div data-label="注文状況" class="sub__status">注文状況<span class="lv-badge">${it.status_ja}</span></div>
                <div data-label="支払い" class="sub__status">支払い状況<span class="lv-badge ${it.payment_status==='paid'?'ok': it.payment_status==='unpaid'?'warn':''}">${it.payment_status_ja}</span></div>
                <div data-label="出荷" class="sub__status">${it.ship_method === 'pickup' ? '受取状況' : '出荷状況'}<span class="lv-badge ${it.shipment_status==='delivered'?'ok': it.shipment_status==='returned'?'ng':''}">
                  ${
                    it.ship_method === 'pickup'
                      ? (it.shipment_status === 'delivered' ? '受取完了' : '未受取')
                      : it.shipment_status_ja
                  }
                </span></div>
              </td>
              <td data-label="合計">¥${(it.total||0).toLocaleString()}</td>
              <td data-label="注文日時">${it.created_at}</td>
              <td data-label="">
                <a class="btn btn--ghost" href="/seller/trades/${it.id}">詳細</a>
              </td>
            </tr>
          `).join('')}
          ${items.length ? '' : `
            <tr><td colspan="7" style="text-align:center;color:#6b7280">該当する取引がありません。</td></tr>
          `}
        </tbody>
      </table>
    `
  })
%>