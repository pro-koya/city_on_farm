<section class="card">
  <div class="card__head">
    <h2>取引履歴</h2>
    <a class="link" href="/seller/trades">すべて見る →</a>
  </div>
  <ul class="list">
    <% if (trades && trades.length) { %>
      <% trades.forEach(function(t){ %>
        <% const isPickup = t.ship_method === 'pickup' ? true : false; %>
        <a href="/seller/trades/<%= t.id %>" class="trade-link">
          <li class="row">
            <span class="lv-badge <%= /完了|配達完了|支払い済み/.test(t.status)?'ok' : /キャンセル|返金済み/.test(t.status)?'ng' : 'pending' %>">
              <%= t.status %>：¥<%= Number(t.amount||0).toLocaleString() %>
            </span>
            <span class="mono">注文者：<%= t.buyer_name %></span>
            <span>注文日：<%= t.date %><br>受渡方法：<span class="lv-badge <%= isPickup ? 'ok' : 'warn'; %>"><%= t.ship_method === 'pickup' ? '畑受取' : '配送'; %></span></span>
            <span><%= isPickup ? '受取希望日時' : '配送希望日時'; %>：<%= !t.eta ? '日付指定なし' : t.eta; %> <%= !t.shipTimeJa ? '時間指定なし' : t.shipTimeJa; %></span>
          </li>
        </a>
      <% }) %>
    <% } else { %>
      <li class="empty">まだ取引がありません。</li>
    <% } %>
  </ul>
</section>