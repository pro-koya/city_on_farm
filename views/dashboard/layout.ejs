<%- include('../partials/header', { title, extraCSS: '/styles/dashboard.css', extraJS: '/js/dashboard.js' }) %>
<main class="db">
  <header class="db__head">
    <h1><%= (currentUser && currentUser.name) ? (currentUser.name + ' さん') : 'ダッシュボード' %></h1>
    <nav class="db__tabs" aria-label="ロール切り替え">
      <% const role = (currentUser && currentUser.roles) || []; %>
      <% if (role === 'buyer' || role.includes('buyer')) { %>
        <a href="/dashboard/buyer"  class="tab <%= active==='buyer' ? 'is-active' : '' %>">購入者</a>
      <% } %>
      <% if (role === 'seller' || role.includes('seller')) { %>
        <a href="/dashboard/seller" class="tab <%= active==='seller' ? 'is-active' : '' %>">出品者</a>
      <% } %>
      <% if (role === 'admin' || role.includes('admin')) { %>
        <a href="/dashboard/admin" class="tab <%= active==='admin' ? 'is-active' : '' %>">管理者</a>
      <% } %>
    </nav>
  </header>

  <section class="db__grid">
    <%- body %>
  </section>
</main>

<script src="/js/dashboard.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.6/dist/chart.umd.min.js"></script>
<script src="/js/revenue-card.js"></script>
<%- include('../partials/footer') %>