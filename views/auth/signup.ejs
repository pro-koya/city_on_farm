<%- include('../partials/header', { title: 'サインアップ', extraCSS: '/styles/auth.css' }) %>

<main class="auth">
  <section class="auth-card" aria-label="サインアップフォーム">
    <div class="auth-head">
      <h1>アカウント作成</h1>
      <p class="muted">1分で登録できます。</p>
    </div>

    <form id="signupForm" class="form form--compact" method="POST" action="/signup" novalidate>
      <!-- 氏名（漢字） -->
      <fieldset class="field">
        <legend class="label">お名前（漢字）</legend>
        <div class="grid-2">
          <label class="field sub">
            <span class="sub-label">姓</span>
            <input type="text" name="lastName" id="lastName" placeholder="山田" required autocomplete="family-name">
            <small class="error" data-error-for="lastName"></small>
          </label>
          <label class="field sub">
            <span class="sub-label">名</span>
            <input type="text" name="firstName" id="firstName" placeholder="太郎" required autocomplete="given-name">
            <small class="error" data-error-for="firstName"></small>
          </label>
        </div>
      </fieldset>

      <!-- 氏名（カナ） -->
      <fieldset class="field">
        <legend class="label label--row">
          お名前（カナ）
          <button id="autoKanaBtn" class="btn btn--ghost btn--xs" type="button" title="ひらがな/カタカナ入力時は自動カナ化">カナ自動</button>
        </legend>
        <div class="grid-2">
          <label class="field sub">
            <span class="sub-label">セイ</span>
            <input type="text" name="lastNameKana" id="lastNameKana" placeholder="ヤマダ" required inputmode="kana">
            <small class="error" data-error-for="lastNameKana"></small>
          </label>
          <label class="field sub">
            <span class="sub-label">メイ</span>
            <input type="text" name="firstNameKana" id="firstNameKana" placeholder="タロウ" required inputmode="kana">
            <small class="error" data-error-for="firstNameKana"></small>
          </label>
        </div>
        <small class="hint">※ 全角カタカナで入力してください</small>
      </fieldset>

      <!-- メール -->
      <label class="field">
        <span class="label">メールアドレス</span>
        <input type="email" name="email" id="email" placeholder="taro@example.com" required autocomplete="email" inputmode="email">
        <small class="error" data-error-for="email"></small>
      </label>

      <!-- ロール -->
      <fieldset class="field">
        <legend class="label">ご利用区分</legend>
        <div class="seg seg--compact">
          <input type="radio" name="role" id="role-buyer" value="buyer" checked>
          <label for="role-buyer">購入者</label>
          <input type="radio" name="role" id="role-producer" value="producer">
          <label for="role-producer">生産者</label>
        </div>
      </fieldset>

      <!-- パスワード -->
      <label class="field">
        <span class="label">パスワード</span>
        <div class="pwd">
          <input type="password" name="password" id="password" placeholder="8文字以上" required autocomplete="new-password">
          <button class="toggle" type="button" aria-label="パスワード表示切替">👁</button>
        </div>
        <div class="meter" aria-hidden="true"><div class="bar" id="strengthBar"></div></div>
        <small class="error" data-error-for="password"></small>
      </label>

      <!-- 確認 -->
      <label class="field">
        <span class="label">パスワード（確認）</span>
        <div class="pwd">
          <input type="password" name="passwordConfirm" id="passwordConfirm" placeholder="もう一度入力" required autocomplete="new-password">
          <button class="toggle" type="button" aria-label="パスワード表示切替">👁</button>
        </div>
        <small class="error" data-error-for="passwordConfirm"></small>
      </label>

      <!-- 規約 -->
      <label class="terms">
        <input type="checkbox" name="agree" id="agree" value="1" required>
        <span>
          <a href="/terms" class="link" target="_blank" rel="noopener">利用規約</a> と
          <a href="/privacy" class="link" target="_blank" rel="noopener">プライバシーポリシー</a>に同意します
        </span>
      </label>

      <% if (typeof error !== 'undefined' && error) { %>
        <div class="banner banner--error"><%= error %></div>
      <% } %>

      <button id="submitBtn" class="btn btn--primary btn--lg" type="submit" disabled>登録する</button>

      <p class="switch">すでにアカウントをお持ちですか？ <a href="/login" class="link">ログイン</a></p>
    </form>
  </section>
</main>

<script src="/js/auth-signup.js"></script>
<%- include('../partials/footer') %>